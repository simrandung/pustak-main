<!-- NAVBAR -->

<app-user-navbar></app-user-navbar>
<nav>
  <!-- Logo -->
  <h1 class="text-3xl font-extrabold tracking-wide">üìò Pustak</h1>

  <!-- Search and Actions -->
  <div class="flex items-center gap-4">
    <!-- Search -->
    <input type="text" [(ngModel)]="searchText" (input)="searchBooks()" placeholder="Search books..."
      class="px-4 py-2 rounded-lg border border-gray-300 text-black shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300" />

    <!-- Notification Bell -->
    <div class="relative">
      <div class="bg-white text-blue-700 rounded-full w-10 h-10 flex items-center justify-center text-xl shadow">
        üîî
      </div>
      <span *ngIf="notifications > 0"
        class="absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold px-1.5 py-0.5 rounded-full shadow">
        {{ notifications }}
      </span>
    </div>

    <!-- Cart Button -->
    <button (click)="cart()" type="button"
      class="bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg text-sm px-5 py-2.5 shadow flex items-center gap-2">
      üõí Cart
    </button>

    <!-- Wishlist Button -->
    <button (click)="wishlist()" type="button"
      class="bg-pink-500 hover:bg-pink-600 text-white font-semibold rounded-lg text-sm px-5 py-2.5 shadow flex items-center gap-2">
      ‚ù§Ô∏è Wishlist
    </button>

    <!-- Logout Button -->
    <button (click)="logout()" type="button"
      class="border border-red-500 text-red-500 hover:bg-red-600 hover:text-white font-semibold rounded-lg text-sm px-5 py-2.5 shadow">
      Logout
    </button>
  </div>
</nav>


<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6 bg-gray-100">
  <div *ngFor="let book of filteredBooks; let i = index" class="[perspective:1000px] w-full h-[400px]">
    <div class="relative w-full h-full transition-transform duration-700 [transform-style:preserve-3d]"
      [ngClass]="{ '[transform:rotateY(180deg)]': flippedCards[i] }">

      <!-- Front Side -->
      <div
        class="absolute w-full h-full bg-white rounded-lg shadow-md border [backface-visibility:hidden] flex flex-col">
        <div class="h-1/2 w-full">
          <img [src]="book.cover_image" alt="book image" class="w-full h-full object-cover rounded-t-lg" />
        </div>
        <div class="h-1/2 p-4 flex flex-col justify-center items-center text-center">
          <h2 class="text-xl font-bold text-blue-800">{{ book.title }}</h2>
          <p class="text-gray-700 text-lg">‚Çπ{{ book.price }}</p>
          <div *ngIf="!book.in_stock" class="mt-2">
            <span class="bg-gray-400 text-white text-xs px-3 py-1 rounded-full">Out of Stock</span>
          </div>
          <div class="flex gap-2 mt-4">
            <button *ngIf="book.in_stock" (click)="addToCart(book)"
              class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded">
              Add to Cart
            </button>
            <button (click)="addToWishlist(book)" class="bg-pink-600 hover:bg-pink-700 text-white px-3 py-1 rounded">
              Wishlist ‚ù§Ô∏è
            </button>
            <button (click)="toggleFlip(i)" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded">
              View Summary
            </button>

          </div>
        </div>
      </div>

      <!-- Back Side -->
      <div
        class="absolute w-full h-full bg-blue-50 rounded-lg shadow-md p-4 [transform:rotateY(180deg)] [backface-visibility:hidden] flex flex-col justify-center items-center text-center">
        <h3 class="text-xl font-semibold text-blue-700 mb-2">Summary</h3>
        <p class="text-gray-700 text-sm">More details about "{{ book.title }}" will be available soon.</p>
        <button (click)="toggleFlip(i)" class="text-blue-600 underline text-sm mt-4">Back</button>
      </div>

    </div>
  </div>
</div>